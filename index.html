<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AWS SAA Learning</title>
  <style>
    :root {
      --maxw: 1200px;
      --bg: #ffffff;
      --fg: #000000;
      --accent: #0b5;
    }

    .wrap {
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 16px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      color: var(--fg);
      background: var(--bg);
      line-height: 20px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #ccc;
      padding-bottom: 8px;
      margin-bottom: 16px;
    }

    h1 {
      margin: 0;
      font-size: 20px;
    }

    button {
      cursor: pointer;
      padding: 8px 12px;
      border: 1px solid #ccc;
      background: #fff;
    }

    button:hover {
      background: #eee;
    }

    .screen {
      display: none;
    }

    .show {
      display: block;
    }

    label {
      display: flex;
      align-items: center;
      margin: 6px 0;
    }

    label span {
      margin-left: 6px;
    }

    .correct {
      color: var(--accent);
      font-weight: bold;
    }

    .question-box {
      margin-bottom: 16px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1>AWS SAA LEARNING BY Q&A</h1>
      <div id="btnMenu" style="cursor:pointer;">MENU</div>
    </header>
    <div id="home" class="screen show"><button id="btnLearn">Learning (>= 1200 Question)</button> <button
        id="btnPractice">Practice Exam (130 Questions)</button></div>
    <div id="learn" class="screen">
      <div id="qnum"></div>
      <div id="qtext" class="question-box"></div>
      <div id="options"></div><button id="actionBtn">CHECK</button>
    </div>
    <script>
      // Load questions from multiple JSON files
      let data = [];
      const jsonFiles = [
        "1_50.json",
        "51_100.json",
        "101_150.json",
        "151_200.json",
        "201_250.json"
      ];

      Promise.all(jsonFiles.map(f => fetch(f).then(r => r.json())))
        .then(all => {
          data = all.flat();
          startApp();
        });

      // Elements
      let current = Number(localStorage.getItem("learnCurrent") || 0);
      const home = document.getElementById("home");
      const learn = document.getElementById("learn");
      const qnum = document.getElementById("qnum");
      const qtext = document.getElementById("qtext");
      const options = document.getElementById("options");
      const actionBtn = document.getElementById("actionBtn");

      // Home buttons
      const btnLearn = document.getElementById("btnLearn");
      const btnPractice = document.getElementById("btnPractice");

      btnLearn.onclick = () => {
        home.classList.remove("show");
        learn.classList.add("show");
        startApp();
      };

      btnPractice.onclick = () => {
        alert("Practice exam not implemented.");
      };

      // Initialize
      function startApp() {
        renderQuestion();
      }

      // Render question
      function renderQuestion() {
        const q = data[current];
        if (!q) return;

        qnum.textContent = `QUESTION ${current + 1}/${data.length}`;
        qtext.textContent = q.q;
        options.innerHTML = "";

        q.o.forEach((op, i) => {
          const id = `chk${i}`;
          const label = document.createElement("label");
          label.innerHTML = `<input type='checkbox' id='${id}' /> <span>${String.fromCharCode(65 + i)}. ${op.c}</span>`;
          options.appendChild(label);
        });

        actionBtn.textContent = "CHECK";
      }

      // Show answers & lock options
      function lockAndShow() {
        const q = data[current];

        q.o.forEach((op, i) => {
          const el = document.getElementById(`chk${i}`);
          const label = el.parentElement;

          el.disabled = true;
          const mark = op.a === "yes" ? "Yes" : "noo";

          label.innerHTML = `<input type='checkbox' disabled ${el.checked ? "checked" : ""} /> <span>${mark} ${String.fromCharCode(65 + i)}. ${op.c}</span>`;

          if (op.a === "yes") label.classList.add("correct");
        });
      }

      // Button logic
      actionBtn.onclick = () => {
        const mode = actionBtn.textContent;

        if (mode === "CHECK") {
          const picked = [...document.querySelectorAll("#options input")].filter(x => x.checked);
          if (picked.length === 0) {
            alert("Please select at least one option.");
            return;
          }

          lockAndShow();
          actionBtn.textContent = current === data.length - 1 ? "RESET" : "NEXT";
        }

        else if (mode === "NEXT") {
          current++;
          localStorage.setItem("learnCurrent", current);
          renderQuestion();
        }

        else if (mode === "RESET") {
          if (confirm("Do you want to reset?")) {
            current = 0;
            localStorage.setItem("learnCurrent", 0);
            renderQuestion();
          }
        }
      };

      const btnMenu = document.getElementById("btnMenu");

      btnMenu.onclick = () => {
        const ok = confirm("Do you want to return to HOME?");

        if (!ok) return;  // User chọn NO → đứng yên

        // User chọn YES → quay lại home
        learn.classList.remove("show");
        home.classList.add("show");
        actionBtn.textContent = "CHECK";
        window.scrollTo(0, 0);
      };

    </script>
  </div>
</body>

</html>